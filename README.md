# TNNI-Mouse: Triton NeuroTech Neural Interface Aided Control of Computer Displays

## No surface, no constraints, the EMG computer mouse 
Do you spends hundreds of dollars on ergonomic computing wear? Ever wish you could reach the third dimension which you as a human are entitled to?

In today's era of advanced technology, the traditional computer mouse can seem a bit archaic. Issues like hand cramping, neck pain, and limitations for those with restricted mobility are calling for a change. That's why we've embarked on a journey to build a low-cost, 4-channel neural interface EMG input device, a helpful tool that promises to overcome these limitations. Our project's goal is simple yet ambitious: To make brain-computer interfaces more accessible. To this end, we've designed an EMG armband that collects signals from muscle contractions.

## Video 
<todo add link>


## Getting started 

### Hardware 
Equipment:
- OpenBCI Cyton 
- HiLetGo MPU-9250 Accelerometer 
- TNNI armband and electrodes (Make it yourself with instructions found <a href="https://www.notion.so/Setting-up-the-armband-v1-cedfd5e207a040f49cadb870782e4840">here</a>)
	- View additional electode designs and corresponding CAD files <a href="https://www.notion.so/Electrode-designs-testing-02a77889273f4634abf1a4feb5045396#66735a91fc4a40858078af40cb69c2ef">here</a>

Set up:
1. Make sure your Cyton is on and dongle is plugged in
2. Open the OpenBCI GUI app
3. Turn on LSL streaming for timeseries data

### Software 
Clone this repository 
```
git clone https://github.com/NeuroTech-UCSD/Project-TNNI-ACD.git
```
Download the dependencies
```
cd TNNI-ACD
pip install -r requirements.txt
```
And run the code! 
```
python scripts/main.py
```

## User centric design

### Adjust your sensitivity and activity length: 

<u>Check the optional arguments</u>: 

```
python scripts/main.py -h
``` 
<u>Customizable options</u>:

**- Sensitvity**: Sensitivity of cursor movements out of 10 where 1 is least sensitive and 10 is most. Default is 5 <p>
**- Activity Time**: For user convenience, adjust in seconds of how long EMG mouse will be on. Default is 60 seconds. <p>

## GitHub Directory 
Written in Python and C, our software interprets all the inputs from the EMG armband and translates them into accurate and smooth computer control efficiently. In our main file, we use an LSL stream to get EMG data from the electrodes and a serial stream to get inertial data from the IMU. Each stream is fed into its own thread where sampling, processing, and GUI calls can occur independently. This will optimize speed and synchronization of the cursor outputs. Each thread follows a similar pipeline: data is pulled, sent through the respective processing functions previously described, and its output calls a change to the cursor, either movement or a click. Utilizing the pyautogui package, we are able to incorporate the calls to change the cursor within our python script. 

- [`/data`]() Where the recorded EMG data, intermediate variables, and analysis results for plotting the figures are stored. 
	- [`/data/emg_recordings`]() - Contains various sessions of EMG recordings.
- [`/figures`]() Stores all of the figures generated by the scripts. 
- [`/notebooks`]() Demo notebooks illustrating the data processing and modeling pipeline.
- [`/psychopy_gui_tests`]()
  	- [`/psychopy_gui_tests/accelerometer.py`]() -
- [`/scripts`]() Each script is for a particular processing stage.
	- [`/scripts/main.py`]() - The script that runs the entire project pipeline, combining all of the processing scripts.
  	- [`/scripts/preprocessing.py`]() -
  	- [`/scripts/analysis.py`]() - 
- [`/src`]() Modular code files that are meant to be imported by different scripts.
	- [`/src/classification.py`]() - 
	- [`/src/emg_task0.py`](h) - 
  	- [`/src/online_emg_task.py`]() - 
  	- [`/src/utils.py`]() - Modular utility functions such as ploting, loading, and saving the data.
- [`/utils`]() Modular code files that are meant to be imported by different scripts.
	- [`/src/features.py`]() - Modular data processing functions for the script files to use.
	- [`/src/process_data_offline.py`]() - 
	- [`/src/process_data_online.py`]() - 
	- [`/src/signal_processing.py`]() - Modular utility functions such as ploting, loading, and saving the data.

## Acknowledgements
Weâ€™d like to thank everyone who made this project possible and NeuroTechX for hosting this competition!
Shout out to Ollie - Thank you for letting us borrow your Cyton! 

**Our team members:**</br>
Joelle Faybishenko</br>
Cassia Rizq</br>
Aiden Truel</br>
Gavin Roberts</br>
Nakshatra Bansal</br>
Sawyer Figueroa</br>
Lea Winner</br>
William Zhang</br>
Akhil Subbarao</br>
Edward </br>

We would also like to thank everyone worked on the following papers and made them available to us:

Makeyev O, Ye-Lin Y, Prats-Boluda G, Garcia-Casado J. Comprehensive Optimization of the Tripolar Concentric Ring Electrode Based on Its Finite Dimensions Model and Confirmed by Finite Element Method Modeling. Sensors. 2021; 21(17):5881. https://doi.org/10.3390/s21175881

Makeyev O, Besio WG. Improving the Accuracy of Laplacian Estimation with Novel Variable Inter-Ring Distances Concentric Ring Electrodes. Sensors. 2016; 16(6):858. https://doi.org/10.3390/s16060858

Wang K, Parekh U, Pailla T, Garudadri H, Gilja V, Ng TN. Stretchable Dry Electrodes with Concentric Ring Geometry for Enhancing Spatial Resolution in Electrophysiology. Adv Healthc Mater. 2017;6(19):10.1002/adhm.201700552. doi:10.1002/adhm.201700552
